<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Data Pipe | Vis Data</title>
    <meta name="description" content="The home of Data Set and Data View among other data related tools.">
    
    
    <link rel="preload" href="/experiment-vuepress/documentation/assets/css/0.styles.f012689f.css" as="style"><link rel="preload" href="/experiment-vuepress/documentation/assets/js/app.b17b2b03.js" as="script"><link rel="preload" href="/experiment-vuepress/documentation/assets/js/3.805928ed.js" as="script"><link rel="preload" href="/experiment-vuepress/documentation/assets/js/8.7d46cb29.js" as="script"><link rel="prefetch" href="/experiment-vuepress/documentation/assets/js/10.0e05d2c6.js"><link rel="prefetch" href="/experiment-vuepress/documentation/assets/js/11.f5227fc5.js"><link rel="prefetch" href="/experiment-vuepress/documentation/assets/js/4.b10746ab.js"><link rel="prefetch" href="/experiment-vuepress/documentation/assets/js/5.df82f324.js"><link rel="prefetch" href="/experiment-vuepress/documentation/assets/js/6.3a84d434.js"><link rel="prefetch" href="/experiment-vuepress/documentation/assets/js/7.3e2d79ed.js"><link rel="prefetch" href="/experiment-vuepress/documentation/assets/js/9.f68a39cc.js"><link rel="prefetch" href="/experiment-vuepress/documentation/assets/js/vendors~docsearch.a57510d0.js">
    <link rel="stylesheet" href="/experiment-vuepress/documentation/assets/css/0.styles.f012689f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/experiment-vuepress/documentation/" class="home-link router-link-active"><!----> <span class="site-name">Vis Data</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/experiment-vuepress/documentation/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://github.com/visjs/experiment-vuepress.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="All Projects Menu" class="dropdown-title"><span class="title">All Projects</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://visjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis.js
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-data/data/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Data
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-timeline/docs/graph2d/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Graph2D
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-graph3d/docs/graph3d/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Graph3D
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-network/docs/network/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Network
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-timeline/docs/timeline/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Timeline
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/experiment-vuepress/documentation/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="https://github.com/visjs/experiment-vuepress.git" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="All Projects Menu" class="dropdown-title"><span class="title">All Projects</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://visjs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis.js
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-data/data/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Data
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-timeline/docs/graph2d/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Graph2D
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-graph3d/docs/graph3d/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Graph3D
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-network/docs/network/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Network
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://visjs.github.io/vis-timeline/docs/timeline/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vis Timeline
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/experiment-vuepress/documentation/guide/data-set/" class="sidebar-link">Data Set</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#usage-example" class="sidebar-link">Usage Example</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#construction" class="sidebar-link">Construction</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#methods" class="sidebar-link">Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#add" class="sidebar-link">add</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#clear" class="sidebar-link">clear</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#distinct" class="sidebar-link">distinct</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#flush" class="sidebar-link">flush</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#foreach" class="sidebar-link">forEach</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#get" class="sidebar-link">get</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#getdataset" class="sidebar-link">getDataSet</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#getids" class="sidebar-link">getIds</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#map" class="sidebar-link">map</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#max" class="sidebar-link">max</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#min" class="sidebar-link">min</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#off" class="sidebar-link">off</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#on" class="sidebar-link">on</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#remove" class="sidebar-link">remove</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#setoptions" class="sidebar-link">setOptions</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#update" class="sidebar-link">update</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#updateonly" class="sidebar-link">updateOnly</a></li></ul></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#properties" class="sidebar-link">Properties</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#length" class="sidebar-link">length</a></li></ul></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#subscriptions" class="sidebar-link">Subscriptions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#subscription-example" class="sidebar-link">Subscription Example</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#add-event" class="sidebar-link">Add Event</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#update-event" class="sidebar-link">Update Event</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#remove-event" class="sidebar-link">Remove Event</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#any-event" class="sidebar-link">Any Event</a></li></ul></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#data-manipulation" class="sidebar-link">Data Manipulation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#manipulation-example" class="sidebar-link">Manipulation Example</a></li></ul></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#data-selection" class="sidebar-link">Data Selection</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-set/#selection-example" class="sidebar-link">Selection Example</a></li></ul></li></ul></li><li><a href="/experiment-vuepress/documentation/guide/data-view/" class="sidebar-link">Data View</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#example" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#construction" class="sidebar-link">Construction</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#methods" class="sidebar-link">Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#get" class="sidebar-link">get</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#getdataset" class="sidebar-link">getDataSet</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#getids" class="sidebar-link">getIds</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#off" class="sidebar-link">off</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#on" class="sidebar-link">on</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#refresh" class="sidebar-link">refresh</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#setdata" class="sidebar-link">setData</a></li></ul></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#properties" class="sidebar-link">Properties</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#length" class="sidebar-link">length</a></li></ul></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#getting-data" class="sidebar-link">Getting Data</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#subscriptions" class="sidebar-link">Subscriptions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-view/#example-2" class="sidebar-link">Example</a></li></ul></li></ul></li><li><a href="/experiment-vuepress/documentation/guide/data-pipe/" class="active sidebar-link">Data Pipe</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-pipe/#example" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-pipe/#construction" class="sidebar-link">Construction</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-pipe/#methods" class="sidebar-link">Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-pipe/#all" class="sidebar-link">all</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-pipe/#start" class="sidebar-link">start</a></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-pipe/#stop" class="sidebar-link">stop</a></li></ul></li><li class="sidebar-sub-header"><a href="/experiment-vuepress/documentation/guide/data-pipe/#type-coercion" class="sidebar-link">Type Coercion</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="data-pipe"><a href="#data-pipe" class="header-anchor">#</a> Data Pipe</h1> <p>A <a href="../data-pipe">Data Pipe</a> offers a way of piping and transforming items from
one <a href="../data-set">DataSet</a> into another <a href="../data-set">Data Set</a>. It can be used
to coerce data types, change structure or even generate brand new items based on
some data specific to your problem.</p> <h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <p>The following example shows how to use a <a href="../data-pipe">Data Pipe</a> to divide app
specific and Vis specific data to prevent name collisions (like having app
specific and Vis specific labels).</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// TypeScript interfaces to illustrate the structure of the data:</span>
<span class="token comment">//</span>
<span class="token comment">// interface appDSItem {</span>
<span class="token comment">//   id: number | string;</span>
<span class="token comment">//</span>
<span class="token comment">//   appLabel: string;</span>
<span class="token comment">//   appPosition: number;</span>
<span class="token comment">//</span>
<span class="token comment">//   visLabel: string;</span>
<span class="token comment">//   visColor: string;</span>
<span class="token comment">//   visX: number;</span>
<span class="token comment">//   visY: number;</span>
<span class="token comment">// }</span>
<span class="token comment">//</span>
<span class="token comment">// interface VisDSItem {</span>
<span class="token comment">//   id: number | string;</span>
<span class="token comment">//   label: string;</span>
<span class="token comment">//   color: string;</span>
<span class="token comment">//   x: number;</span>
<span class="token comment">//   y: number;</span>
<span class="token comment">// }</span>

<span class="token keyword">const</span> appDS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSet</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">/* some app data */</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> visDS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pipe <span class="token operator">=</span> <span class="token function">createNewDataPipeFrom</span><span class="token punctuation">(</span>appDS<span class="token punctuation">)</span>
  <span class="token comment">// All items can be arbitrarily transformed.</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> item<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    label<span class="token punctuation">:</span> item<span class="token punctuation">.</span>visLabel<span class="token punctuation">,</span>
    color<span class="token punctuation">:</span> item<span class="token punctuation">.</span>visColor<span class="token punctuation">,</span>
    x<span class="token punctuation">:</span> item<span class="token punctuation">.</span>visX<span class="token punctuation">,</span>
    y<span class="token punctuation">:</span> item<span class="token punctuation">.</span>visY
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">// This builds and returns the pipe from appDS to visDS.</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>visDS<span class="token punctuation">)</span><span class="token punctuation">;</span>

pipe<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// All items were transformed and piped into visDS and all later changes</span>
<span class="token comment">// will be transformed and piped as well.</span>
</code></pre></div><h2 id="construction"><a href="#construction" class="header-anchor">#</a> Construction</h2> <p>A <a href="../data-pipe">Data Pipe</a> can be constructed as:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> pipe <span class="token operator">=</span> <span class="token function">createNewDataPipeFrom</span><span class="token punctuation">(</span>sourceDataSet<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>enabled <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">/* some new item */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token comment">/* zero or more new items */</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>targetDataSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>where:</p> <ul><li><code>sourceDataSet</code> is a <a href="../data-set">Data Set</a> or <a href="../data-view">Data View</a> that
will supply the items into the pipe line.</li> <li><code>targetDataSet</code> is a <a href="../data-set">Data Set</a> that will receive the processed
items from the pipe line.</li> <li><code>.filter</code>'s argument is a function that takes an item from the pipe as it's
argument and returns true if the item should be processed further down the
pipe line or false if it should be skipped.</li> <li><code>.map</code>'s argument is a function that takes an item from the pipe as it's
argument and returns a new item that will be processed further down the pipe
line.</li> <li><code>.flatMap</code>'s argument is a function that takes an item from the pipe as it's
argument and returns an array of zero or more items that will be processed
further down the pipe line.</li></ul> <p>Note that the items are passed through the pipe in the order in which the
factory methods (<code>.filter</code>, <code>.map</code> and <code>.flatMap</code>) were called. Also note that
it's possible to use the same method multiple times (for example <code>.filter</code>,
<code>.map</code> and <code>.filter</code> again) or only use some of them (for example <code>.filter</code> and
<code>.map</code> but no <code>.flatMap</code>).</p> <h2 id="methods"><a href="#methods" class="header-anchor">#</a> Methods</h2> <p><a href="../data-pipe">Data Pipe</a> contains the following methods:</p> <h3 id="all"><a href="#all" class="header-anchor">#</a> all</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code>iterface DataPipe <span class="token punctuation">{</span>
  <span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Sends all the data from the source <a href="../data-set">Data Set</a> or
<a href="../data-view">Data View</a> down the pipe line.</p> <h3 id="start"><a href="#start" class="header-anchor">#</a> start</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code>iterface DataPipe <span class="token punctuation">{</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Starts observing the changes in the source <a href="../data-set">Data Set</a> or
<a href="../data-view">Data View</a> and sending them down the pipe line as they happen.</p> <h3 id="stop"><a href="#stop" class="header-anchor">#</a> stop</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code>iterface DataPipe <span class="token punctuation">{</span>
  <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Stops observing changes in the source <a href="../data-set">Data Set</a> or
<a href="../data-view">Data View</a></p> <h2 id="type-coercion"><a href="#type-coercion" class="header-anchor">#</a> Type Coercion</h2> <p><a href="../data-pipe">Data Pipe</a> can be used as a replacement for the now deprecated
type coercion of <a href="../data-set">Data Set</a> (configured by the <code>type</code> constructor
parameter).</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// --[BEGIN]-- The original implementation of type coercion.</span>

<span class="token comment">// !!!! Make sure to import Moment.js as this code depends on it.</span>
<span class="token keyword">const</span> convert <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// parse ASP.Net Date pattern,</span>
  <span class="token comment">// for example '/Date(1198908717056)/' or '/Date(1198908717056-0700)/'</span>
  <span class="token comment">// code from http://momentjs.com/</span>
  <span class="token keyword">const</span> ASPDateRegex <span class="token operator">=</span> <span class="token regex">/^\/?Date\((-?\d+)/i</span><span class="token punctuation">;</span>

  <span class="token comment">/**
   * Test whether given object is a number
   *
   * @param value - Input value of unknown type.
   *
   * @returns True if number, false otherwise.
   */</span>
  <span class="token keyword">function</span> <span class="token function">isNumber</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token keyword">instanceof</span> <span class="token class-name">Number</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Test whether given object is a string
   *
   * @param value - Input value of unknown type.
   *
   * @returns True if string, false otherwise.
   */</span>
  <span class="token keyword">function</span> <span class="token function">isString</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Get the type of an object, for example exports.getType([]) returns 'Array'
   *
   * @param object - Input value of unknown type.
   *
   * @returns Detected type.
   */</span>
  <span class="token keyword">function</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token parameter">object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token keyword">typeof</span> object<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">Boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Boolean&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">Number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Number&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;String&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Array&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Date&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;Number&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;Boolean&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;String&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> type<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Convert an object into another type
   *
   * @param object - Value of unknown type.
   * @param type - Name of the desired type.
   *
   * @returns Object in the desired type.
   * @throws Error
   */</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> match<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> object<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> type <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>type <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Type must be a string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//noinspection FallthroughInSwitchStatementJS</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;boolean&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Boolean&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token function">Boolean</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">case</span> <span class="token string">&quot;Number&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isNaN</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// @TODO: I don't think that Number and String constructors are a good idea.</span>
          <span class="token comment">// This could also fail if the object doesn't have valueOf method or if it's redefined.</span>
          <span class="token comment">// For example: Object.create(null) or { valueOf: 7 }.</span>
          <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token keyword">case</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">:</span>
      <span class="token keyword">case</span> <span class="token string">&quot;String&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token function">String</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">case</span> <span class="token string">&quot;Date&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNumber</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>moment<span class="token punctuation">.</span><span class="token function">isMoment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          match <span class="token operator">=</span> ASPDateRegex<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// object is an ASP date</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// parse number</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// parse string</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
            <span class="token string">&quot;Cannot convert object of type &quot;</span> <span class="token operator">+</span> <span class="token function">getType</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; to type Date&quot;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

      <span class="token keyword">case</span> <span class="token string">&quot;Moment&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNumber</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span>object<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>moment<span class="token punctuation">.</span><span class="token function">isMoment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          match <span class="token operator">=</span> ASPDateRegex<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// object is an ASP date</span>
            <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// parse number</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// parse string</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
            <span class="token string">&quot;Cannot convert object of type &quot;</span> <span class="token operator">+</span> <span class="token function">getType</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; to type Date&quot;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

      <span class="token keyword">case</span> <span class="token string">&quot;ISODate&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNumber</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> object<span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>moment<span class="token punctuation">.</span><span class="token function">isMoment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> object<span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          match <span class="token operator">=</span> ASPDateRegex<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// object is an ASP date</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toISOString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// parse number</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ISO 8601</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
            <span class="token string">&quot;Cannot convert object of type &quot;</span> <span class="token operator">+</span>
              <span class="token function">getType</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">+</span>
              <span class="token string">&quot; to type ISODate&quot;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

      <span class="token keyword">case</span> <span class="token string">&quot;ASPDate&quot;</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNumber</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">&quot;/Date(&quot;</span> <span class="token operator">+</span> object <span class="token operator">+</span> <span class="token string">&quot;)/&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token keyword">instanceof</span> <span class="token class-name">Date</span> <span class="token operator">||</span> moment<span class="token punctuation">.</span><span class="token function">isMoment</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">&quot;/Date(&quot;</span> <span class="token operator">+</span> object<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)/&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isString</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          match <span class="token operator">=</span> ASPDateRegex<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">let</span> value<span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// object is an ASP date</span>
            value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// parse number</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// parse string</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token string">&quot;/Date(&quot;</span> <span class="token operator">+</span> value <span class="token operator">+</span> <span class="token string">&quot;)/&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>
            <span class="token string">&quot;Cannot convert object of type &quot;</span> <span class="token operator">+</span>
              <span class="token function">getType</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token operator">+</span>
              <span class="token string">&quot; to type ASPDate&quot;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

      <span class="token keyword">default</span><span class="token punctuation">:</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Unknown type </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// --[END]-- The original implementation of type coercion.</span>

<span class="token keyword">const</span> rawDS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSet</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">/* raw data with arbitrary types */</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> date<span class="token punctuation">:</span> <span class="token string">&quot;2017-09-04&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> date<span class="token punctuation">:</span> <span class="token string">&quot;2017-10-04&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> label<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> date<span class="token punctuation">:</span> <span class="token string">&quot;2017-11-04&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> coercedDS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSet</span><span class="token punctuation">(</span><span class="token comment">/* the data with coerced types will be piped here */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> types <span class="token operator">=</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  label<span class="token punctuation">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  date<span class="token punctuation">:</span> <span class="token string">&quot;Date&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pipe <span class="token operator">=</span> <span class="token function">createNewDataPipeFrom</span><span class="token punctuation">(</span>rawDS<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      acc<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">convert</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> types<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>coercedDS<span class="token punctuation">)</span><span class="token punctuation">;</span>

pipe<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// All items were transformed and piped into visDS and all later changes</span>
<span class="token comment">// will be transformed and piped as well.</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/experiment-vuepress/documentation/guide/data-view/" class="prev">Data View</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/experiment-vuepress/documentation/assets/js/app.b17b2b03.js" defer></script><script src="/experiment-vuepress/documentation/assets/js/3.805928ed.js" defer></script><script src="/experiment-vuepress/documentation/assets/js/8.7d46cb29.js" defer></script>
  </body>
</html>
